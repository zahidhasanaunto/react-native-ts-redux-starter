{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){return function(){var Super=_getPrototypeOf(Derived),result;if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React from'react';import FlatList from\"react-native-web/dist/exports/FlatList\";import Image from\"react-native-web/dist/exports/Image\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import{KeyboardAwareScrollView}from'react-native-keyboard-aware-scroll-view';import{heightPercentageToDP as hp}from'react-native-responsive-screen';import FeatherIcon from\"@expo/vector-icons/Feather\";import{connect}from'react-redux';import{NoDataFound}from\"../../components/NoData/noData\";import{MowButtonBasic}from\"../../components/ui/Common/Button/MowButton\";import{MowInput}from\"../../components/ui/Common/Input/MowInput\";import{_showToast}from\"../../components/ui/Common/Toast/MowToast\";import MowContainer from\"../../components/ui/Core/Container/MowContainer\";import{CouponController}from\"../../controller/coupon.controller\";import{decreaseInCart,increaseInCart,removeFromCart,setActivatedCoupon}from\"../../store/actions/productActions\";import{mowColors}from\"../../values/Colors/MowColors\";import{borderStyle,categoryStyleWithoutShadow,fontFamily}from\"../../values/Styles/MowStyles\";var CartScreen=function(_React$Component){_inherits(CartScreen,_React$Component);var _super=_createSuper(CartScreen);function CartScreen(props){var _this;_classCallCheck(this,CartScreen);_this=_super.call(this,props);_this.couponController=new CouponController();_this._unsubscribe=null;_this.cartTotalStyle={rowView:{flexDirection:'row',justifyContent:'space-between'},title:{color:mowColors.titleTextColor,marginRight:10,fontSize:hp(1.6),letterSpacing:0},content:{color:mowColors.textColor,marginRight:10,fontSize:hp(1.5),fontWeight:'600',letterSpacing:1}};_this.activateCoupon=function(){_this.setState({isLoadingCoupon:true});_this.couponController.getByCouponCode(_this.state.coupon).subscribe(function(result){var data=result.data;if(data.data.length>0){if(data.data[0].status===1){var coupon=data.data[0];_this.setState({activatedCoupon:coupon});_this.props.setActivatedCoupon(coupon);_showToast.success('Coupon Activated');}else{_showToast.error('Coupon Expired');_this.setState({activatedCoupon:null});_this.props.setActivatedCoupon(null);}}else{_showToast.error('Invalid Coupon');_this.setState({activatedCoupon:null});_this.props.setActivatedCoupon(null);}_this.calculateCouponTotal();_this.setState({isLoadingCoupon:false});});};_this.state={subTotal:0,vatTotal:0,couponTotal:0,total:0,coupon:null,activatedCoupon:null,cart:[],isLoadingCoupon:false};return _this;}_createClass(CartScreen,[{key:\"getPromotionalPrice\",value:function getPromotionalPrice(product){var user=this.props.user.user;if(user!==null&&user.isMembershipActivated===1){if(product.hasPromotion){return product.priceOne-product.promotionPriceOne;}else{return product.priceOne;}}else{if(product.hasPromotion){return product.mrp-product.promotionMrp;}else{return product.mrp;}}}},{key:\"getActualPrice\",value:function getActualPrice(product){var user=this.props.user.user;if(user!==null&&user.isMembershipActivated===1){return product.priceOne;}else{return product.mrp;}}},{key:\"calculateSubTotal\",value:function calculateSubTotal(){var user=this.props.user;var cart=this.props.product.cart;var subTotal=0;if(user.isMembershipActivated===1){cart.map(function(ob){if(ob.product.hasPromotion){subTotal+=(ob.product.priceOne-ob.product.promotionPriceOne)*ob.quantity;}else{subTotal+=ob.product.priceOne*ob.quantity;}});}else{cart.map(function(ob){if(ob.product.hasPromotion){subTotal+=(ob.product.mrp-ob.product.promotionMrp)*ob.quantity;}else{subTotal+=ob.product.mrp*ob.quantity;}});}return subTotal;}},{key:\"calculateVatTotal\",value:function calculateVatTotal(){var user=this.props.user;var cart=this.props.product.cart;var vatTotal=0;if(user.isMembershipActivated===1){cart.map(function(ob){if(ob.product.hasPromotion){if(ob.product.isPromotionPriceInclVat===1){vatTotal+=0*ob.quantity;}else{vatTotal+=ob.product.priceOneVat*ob.quantity;}}else{vatTotal+=ob.product.priceOneVat*ob.quantity;}});}else{cart.map(function(ob){if(ob.product.hasPromotion){if(ob.product.isPromotionPriceInclVat===1){vatTotal+=0*ob.quantity;}else{vatTotal+=ob.product.mrpVat*ob.quantity;}}else{vatTotal+=ob.product.mrpVat*ob.quantity;}});}return vatTotal;}},{key:\"calculateCouponTotal\",value:function calculateCouponTotal(){var activatedCoupon=this.state.activatedCoupon;var total=this.calculateSubTotal()+this.calculateVatTotal();var couponTotal=0;if(activatedCoupon===null){return couponTotal;}else{if(activatedCoupon.type==='percent'){couponTotal+=parseFloat(this.percentage(activatedCoupon.value,total));}else{couponTotal+=activatedCoupon.value;}}return couponTotal;}},{key:\"percentage\",value:function percentage(percent,total){return(percent/100*total).toFixed(2);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this._unsubscribe=this.props.navigation.addListener('focus',function(){_this2.setState({cart:_this2.props.product.cart,activatedCoupon:_this2.props.product.activatedCoupon});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._unsubscribe();}},{key:\"render\",value:function render(){var _this3=this;var cart=this.state.cart;return React.createElement(MowContainer,{navigation:this.props.navigation,footerActiveIndex:3,title:\"Cart\",style:{backgroundColor:mowColors.pageBGDarkColor}},cart.length>0?React.createElement(KeyboardAwareScrollView,{style:{marginBottom:hp('7%')}},React.createElement(FlatList,{style:{marginTop:-5},keyExtractor:function keyExtractor(item,index){return index.toString();},data:this.props.product.cart,renderItem:function renderItem(_ref){var item=_ref.item,index=_ref.index;return React.createElement(View,{key:index,style:[categoryStyleWithoutShadow,{flexDirection:'row',marginVertical:5,backgroundColor:mowColors.viewBGColor,padding:10}]},React.createElement(View,{style:{flex:1.5,alignItems:'center',justifyContent:'center'}},React.createElement(Image,{resizeMode:'contain',style:{width:hp('10%'),height:hp('10%')},source:{uri:item.product.featuredImage}})),React.createElement(View,{style:{flex:4,marginLeft:10}},React.createElement(Text,{style:{fontSize:hp('1.8%'),fontWeight:'600',fontStyle:'normal',textAlign:'left',color:mowColors.titleTextColor,marginBottom:10,paddingRight:5,fontFamily:fontFamily.semiBold}},item.product.name),React.createElement(View,{style:{alignItems:'center',flexDirection:'row'}},item.product.hasPromotion?React.createElement(View,{style:{flex:1.5}},React.createElement(Text,{style:{fontSize:hp('2%'),fontWeight:'bold',fontStyle:'normal',letterSpacing:0,textAlign:'left',color:mowColors.titleTextColor,fontFamily:fontFamily.bold}},_this3.getPromotionalPrice(item.product)*item.quantity)):React.createElement(View,{style:{flex:1.5}},React.createElement(Text,{style:{fontSize:hp('2%'),fontWeight:'bold',fontStyle:'normal',letterSpacing:0,textAlign:'left',color:mowColors.titleTextColor,fontFamily:fontFamily.bold}},_this3.getActualPrice(item.product)*item.quantity)),React.createElement(View,{style:{flex:3,flexDirection:'row',alignItems:'center',alignSelf:'center',justifyContent:'center'}},React.createElement(TouchableOpacity,{onPress:function onPress(){_this3.props.decreaseInCart(item.product);},style:minusPlusStyle.container},React.createElement(Text,null,\"-\")),React.createElement(Text,{style:{fontSize:hp('2%'),fontWeight:'600',fontStyle:'normal',letterSpacing:0,textAlign:'center',color:mowColors.titleTextColor,marginHorizontal:15,fontFamily:fontFamily.semiBold}},item.quantity),React.createElement(TouchableOpacity,{onPress:function onPress(){_this3.props.increaseInCart(item.product);},style:minusPlusStyle.container},React.createElement(Text,null,\"+\"))),React.createElement(TouchableOpacity,{onPress:function onPress(){_this3.props.removeFromCart(item.product);},style:{flex:1}},React.createElement(FeatherIcon,{style:{textAlign:'center',color:mowColors.mainColor,fontSize:hp('2.5%')},name:'trash-2'})))));}})):React.createElement(NoDataFound,{message:\"No Cart Item\"}),cart.length>0?React.createElement(View,{style:{width:'90%',alignSelf:'center',alignItems:'center'}},React.createElement(View,{style:{flexDirection:'row',backgroundColor:mowColors.viewBGColor,borderRadius:5,alignSelf:'center',height:hp('5.5%'),marginVertical:hp('1%'),width:'90%'}},React.createElement(MowInput,{containerStyle:{flex:3,borderWidth:0,backgroundColor:'transparent'},iconColor:'#b6babe',textInputStyle:{fontFamily:fontFamily.regular},placeholder:\"20OFF\",leftIcon:'percent',onChangeText:function onChangeText(value){_this3.setState({coupon:value});}}),React.createElement(MowButtonBasic,{containerStyle:{flex:1,backgroundColor:mowColors.mainColor},size:'small',type:'success',onPress:this.activateCoupon},this.state.isLoadingCoupon?'Applying':'Apply')),React.createElement(View,{style:{backgroundColor:mowColors.viewBGColor,flexDirection:'row',width:'100%',borderRadius:5,padding:10}},React.createElement(View,{style:{flex:1}},React.createElement(View,null,React.createElement(Text,{style:this.cartTotalStyle.title},\"Sub Total:\"),React.createElement(Text,null,this.calculateSubTotal())),React.createElement(View,null,React.createElement(Text,{style:this.cartTotalStyle.title},\"Vat:\"),React.createElement(Text,null,this.calculateVatTotal())),React.createElement(View,null,React.createElement(Text,{style:this.cartTotalStyle.title},\"Coupon:\"),React.createElement(Text,null,this.calculateCouponTotal()))),React.createElement(View,{style:{flex:1,alignItems:'flex-end',justifyContent:'center'}},React.createElement(Text,{style:{color:mowColors.mainColor,marginRight:10,fontSize:hp(2),fontWeight:'bold',letterSpacing:1}},this.calculateSubTotal()+this.calculateVatTotal()-this.calculateCouponTotal()))),React.createElement(MowButtonBasic,{onPress:function onPress(){_this3.props.navigation.navigate('BillingAddress');},type:'success'},\"Continue\")):null);}}]);return CartScreen;}(React.Component);var minusPlusStyle={container:_objectSpread({borderRadius:3,backgroundColor:'#ffffff'},borderStyle,{alignItems:'center',justifyContent:'center',width:hp('3%'),height:hp('3%')}),text:{fontSize:hp('2%'),fontWeight:'600',fontStyle:'normal',letterSpacing:0,textAlign:'center',color:'#707070'}};var mapStateToProps=function mapStateToProps(state){var user=state.user,product=state.product;return{user:user,product:product};};var mapDispatchToProps={increaseInCart:increaseInCart,decreaseInCart:decreaseInCart,removeFromCart:removeFromCart,setActivatedCoupon:setActivatedCoupon};export default connect(mapStateToProps,mapDispatchToProps)(CartScreen);","map":{"version":3,"sources":["/home/aunto/Projects/WCL/wcl-app/src/scenes/cart/cart.component.tsx"],"names":["heightPercentageToDP","CartScreen","React","couponController","_unsubscribe","subTotal","vatTotal","couponTotal","total","coupon","activatedCoupon","cart","isLoadingCoupon","rowView","flexDirection","justifyContent","title","color","mowColors","marginRight","fontSize","hp","letterSpacing","content","fontWeight","product","user","ob","parseFloat","percent","data","result","_showToast","backgroundColor","marginBottom","marginTop","index","item","marginVertical","padding","flex","alignItems","width","height","uri","marginLeft","fontStyle","textAlign","paddingRight","fontFamily","alignSelf","minusPlusStyle","marginHorizontal","borderRadius","borderWidth","container","text","mapStateToProps","state","mapDispatchToProps","increaseInCart","decreaseInCart","removeFromCart","setActivatedCoupon","connect"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { FlatList, Image, Text, TouchableOpacity, View } from 'react-native';\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport { heightPercentageToDP as hp } from 'react-native-responsive-screen';\nimport FeatherIcon from 'react-native-vector-icons/Feather';\nimport { connect } from 'react-redux';\nimport { Loading } from '../../components/Loading/loading';\nimport { NoDataFound } from '../../components/NoData/noData';\nimport { MowButtonBasic } from '../../components/ui/Common/Button/MowButton';\nimport { MowInput } from '../../components/ui/Common/Input/MowInput';\nimport { _showToast } from '../../components/ui/Common/Toast/MowToast';\nimport MowContainer from '../../components/ui/Core/Container/MowContainer';\nimport { CouponController } from '../../controller/coupon.controller';\nimport { decreaseInCart, increaseInCart, removeFromCart, setActivatedCoupon } from '../../store/actions/productActions';\nimport { mowColors } from '../../values/Colors/MowColors';\nimport { borderStyle, categoryStyleWithoutShadow, fontFamily } from '../../values/Styles/MowStyles';\n\ninterface IProps {\n    navigation: any;\n    user: any;\n    product: any;\n    increaseInCart(data): any;\n    decreaseInCart(data): any;\n    removeFromCart(data): any;\n    setActivatedCoupon(data): any;\n\n}\n\ninterface IState {\n    subTotal: any;\n    vatTotal: any;\n    couponTotal: any;\n    total: any;\n    coupon: any;\n    activatedCoupon: any;\n    cart: any[];\n    isLoadingCoupon: boolean;\n}\n\nclass CartScreen extends React.Component<IProps, IState> {\n\n    couponController = new CouponController();\n    _unsubscribe = null;\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            subTotal: 0,\n            vatTotal: 0,\n            couponTotal: 0,\n            total: 0,\n            coupon: null,\n            activatedCoupon: null,\n            cart: [],\n            isLoadingCoupon: false,\n        };\n    }\n\n    cartTotalStyle = {\n        rowView: {\n            flexDirection: 'row',\n            justifyContent: 'space-between'\n        },\n        title: {\n            color: mowColors.titleTextColor,\n            marginRight: 10,\n            fontSize: hp(1.6),\n            letterSpacing: 0\n        },\n        content: {\n            color: mowColors.textColor,\n            marginRight: 10,\n            fontSize: hp(1.5),\n            fontWeight: '600',\n            letterSpacing: 1\n        }\n    };\n\n    getPromotionalPrice(product) {\n        const user = this.props.user.user;\n        if (user !== null && user.isMembershipActivated === 1) {\n            if (product.hasPromotion) {\n                return product.priceOne - product.promotionPriceOne;\n            } else {\n                return product.priceOne;\n            }\n        } else {\n            if (product.hasPromotion) {\n                return product.mrp - product.promotionMrp;\n            } else {\n                return product.mrp;\n            }\n        }\n    }\n\n    getActualPrice(product) {\n        const user = this.props.user.user;\n        if (user !== null && user.isMembershipActivated === 1) {\n            return product.priceOne;\n        } else {\n            return product.mrp;\n        }\n    }\n\n    calculateSubTotal() {\n        const user = this.props.user;\n        const cart = this.props.product.cart;\n        let subTotal = 0;\n\n        if (user.isMembershipActivated === 1) {\n            cart.map(ob => {\n                if (ob.product.hasPromotion) {\n                    subTotal += (ob.product.priceOne - ob.product.promotionPriceOne) * ob.quantity;\n                } else {\n                    subTotal += ob.product.priceOne * ob.quantity;\n                }\n            })\n        } else {\n            cart.map(ob => {\n                if (ob.product.hasPromotion) {\n                    subTotal += (ob.product.mrp - ob.product.promotionMrp) * ob.quantity;\n                } else {\n                    subTotal += ob.product.mrp * ob.quantity;\n                }\n            })\n        }\n        // this.setState({ subTotal });\n        return subTotal;\n    }\n\n    calculateVatTotal() {\n        const user = this.props.user;\n        const cart = this.props.product.cart;\n        let vatTotal = 0;\n\n        if (user.isMembershipActivated === 1) {\n            cart.map(ob => {\n                if (ob.product.hasPromotion) {\n                    if (ob.product.isPromotionPriceInclVat === 1) {\n                        vatTotal += 0 * ob.quantity;\n                    } else {\n                        vatTotal += ob.product.priceOneVat * ob.quantity;\n                    }\n                } else {\n                    vatTotal += ob.product.priceOneVat * ob.quantity;\n                }\n            })\n        } else {\n            cart.map(ob => {\n                if (ob.product.hasPromotion) {\n                    if (ob.product.isPromotionPriceInclVat === 1) {\n                        vatTotal += 0 * ob.quantity;\n                    } else {\n                        vatTotal += ob.product.mrpVat * ob.quantity;\n                    }\n                } else {\n                    vatTotal += ob.product.mrpVat * ob.quantity;\n                }\n            })\n        }\n        // this.setState({ vatTotal });\n        return vatTotal;\n    }\n\n    calculateCouponTotal() {\n        const { activatedCoupon } = this.state;\n        const total = this.calculateSubTotal() + this.calculateVatTotal();\n\n        let couponTotal = 0;\n\n        if (activatedCoupon === null) {\n            // this.setState({ couponTotal });\n            return couponTotal;\n        } else {\n            if (activatedCoupon.type === 'percent') {\n                couponTotal += parseFloat(this.percentage(activatedCoupon.value, total))\n            } else {\n                couponTotal += activatedCoupon.value;\n            }\n        }\n\n        // this.setState({ couponTotal });\n        return couponTotal;\n    }\n\n    percentage(percent, total) {\n        return ((percent / 100) * total).toFixed(2)\n    }\n\n    activateCoupon = () => {\n        this.setState({ isLoadingCoupon: true })\n        this.couponController.getByCouponCode(this.state.coupon)\n            .subscribe((result: any) => {\n                const data = result.data;\n                if (data.data.length > 0) {\n                    if (data.data[0].status === 1) {\n                        const coupon = data.data[0];\n                        this.setState({ activatedCoupon: coupon });\n                        this.props.setActivatedCoupon(coupon);\n                        _showToast.success('Coupon Activated');\n                    } else {\n                        _showToast.error('Coupon Expired');\n                        this.setState({ activatedCoupon: null });\n                        this.props.setActivatedCoupon(null);\n                    }\n                } else {\n                    _showToast.error('Invalid Coupon');\n                    this.setState({ activatedCoupon: null });\n                    this.props.setActivatedCoupon(null);\n                }\n\n                this.calculateCouponTotal();\n                this.setState({ isLoadingCoupon: false });\n            })\n    }\n\n    componentDidMount() {\n        this._unsubscribe = this.props.navigation.addListener('focus', () => {\n            this.setState({ cart: this.props.product.cart, activatedCoupon: this.props.product.activatedCoupon });\n        })\n    }\n\n    componentWillUnmount() {\n        this._unsubscribe();\n    }\n\n    render() {\n        const { cart } = this.state;\n        return (\n\n            <MowContainer\n                navigation={this.props.navigation}\n                footerActiveIndex={3}\n                title='Cart'\n                style={{ backgroundColor: mowColors.pageBGDarkColor }}>\n\n                {\n                    cart.length > 0 ?\n                        <KeyboardAwareScrollView\n                            style={{ marginBottom: hp('7%') }}>\n\n                            <FlatList\n                                style={{ marginTop: -5 }}\n                                keyExtractor={(item, index) => index.toString()}\n                                data={this.props.product.cart}\n                                renderItem={({ item, index }) => (\n\n                                    <View\n                                        key={index}\n                                        style={[categoryStyleWithoutShadow, {\n                                            flexDirection: 'row',\n                                            marginVertical: 5,\n                                            backgroundColor: mowColors.viewBGColor,\n                                            padding: 10\n                                        }]}>\n\n                                        <View\n                                            style={{\n                                                flex: 1.5,\n                                                alignItems: 'center',\n                                                justifyContent: 'center'\n                                            }}>\n\n                                            <Image\n                                                resizeMode={'contain'}\n                                                style={{ width: hp('10%'), height: hp('10%') }}\n                                                source={{ uri: item.product.featuredImage }} />\n\n                                        </View>\n\n                                        <View\n                                            style={{ flex: 4, marginLeft: 10 }}>\n\n                                            <Text\n                                                style={{\n                                                    fontSize: hp('1.8%'),\n                                                    fontWeight: '600',\n                                                    fontStyle: 'normal',\n                                                    textAlign: 'left',\n                                                    color: mowColors.titleTextColor,\n                                                    marginBottom: 10,\n                                                    paddingRight: 5,\n                                                    fontFamily: fontFamily.semiBold\n                                                }}>\n\n                                                {item.product.name}\n\n                                            </Text>\n\n                                            <View\n                                                style={{ alignItems: 'center', flexDirection: 'row' }}>\n\n                                                {\n                                                    item.product.hasPromotion ?\n                                                        <View\n                                                            style={{ flex: 1.5 }}>\n\n                                                            <Text\n                                                                style={{\n                                                                    fontSize: hp('2%'),\n                                                                    fontWeight: 'bold',\n                                                                    fontStyle: 'normal',\n                                                                    letterSpacing: 0,\n                                                                    textAlign: 'left',\n                                                                    color: mowColors.titleTextColor,\n                                                                    fontFamily: fontFamily.bold\n                                                                }}>\n\n                                                                {this.getPromotionalPrice(item.product) * item.quantity}\n\n                                                            </Text>\n\n                                                        </View> :\n                                                        <View\n                                                            style={{ flex: 1.5 }}>\n\n                                                            <Text\n                                                                style={{\n                                                                    fontSize: hp('2%'),\n                                                                    fontWeight: 'bold',\n                                                                    fontStyle: 'normal',\n                                                                    letterSpacing: 0,\n                                                                    textAlign: 'left',\n                                                                    color: mowColors.titleTextColor,\n                                                                    fontFamily: fontFamily.bold\n                                                                }}>\n\n                                                                {this.getActualPrice(item.product) * item.quantity}\n\n                                                            </Text>\n\n                                                        </View>\n                                                }\n\n\n                                                <View\n                                                    style={{ flex: 3, flexDirection: 'row', alignItems: 'center', alignSelf: 'center', justifyContent: 'center' }}>\n                                                    <TouchableOpacity\n                                                        onPress={() => { this.props.decreaseInCart(item.product) }}\n                                                        style={minusPlusStyle.container}>\n                                                        <Text>\n                                                            -\n                                                </Text>\n                                                    </TouchableOpacity>\n                                                    <Text\n                                                        style={{\n                                                            fontSize: hp('2%'),\n                                                            fontWeight: '600',\n                                                            fontStyle: 'normal',\n                                                            letterSpacing: 0,\n                                                            textAlign: 'center',\n                                                            color: mowColors.titleTextColor,\n                                                            marginHorizontal: 15,\n                                                            fontFamily: fontFamily.semiBold,\n                                                        }}>\n                                                        {item.quantity}\n                                                    </Text>\n                                                    <TouchableOpacity\n                                                        onPress={() => { this.props.increaseInCart(item.product) }}\n                                                        style={minusPlusStyle.container}>\n                                                        <Text>\n                                                            +\n                                                </Text>\n                                                    </TouchableOpacity>\n                                                </View>\n\n                                                <TouchableOpacity\n                                                    onPress={() => { this.props.removeFromCart(item.product) }}\n                                                    style={{ flex: 1 }}>\n                                                    <FeatherIcon\n                                                        style={{\n                                                            textAlign: 'center',\n                                                            color: mowColors.mainColor,\n                                                            fontSize: hp('2.5%')\n                                                        }}\n                                                        name={'trash-2'} />\n                                                </TouchableOpacity>\n                                            </View>\n                                        </View>\n                                    </View>\n                                )}\n                            />\n\n\n                        </KeyboardAwareScrollView> : <NoDataFound message='No Cart Item' />\n                }\n\n                {\n                    cart.length > 0 ?\n                        <View\n                            style={{ width: '90%', alignSelf: 'center', alignItems: 'center' }}>\n                            <View\n                                style={{\n                                    flexDirection: 'row',\n                                    backgroundColor: mowColors.viewBGColor,\n                                    borderRadius: 5,\n                                    alignSelf: 'center',\n                                    height: hp('5.5%'),\n                                    marginVertical: hp('1%'),\n                                    width: '90%'\n                                }}>\n\n                                <MowInput\n                                    containerStyle={{ flex: 3, borderWidth: 0, backgroundColor: 'transparent' }}\n                                    iconColor={'#b6babe'}\n                                    textInputStyle={{ fontFamily: fontFamily.regular }}\n                                    placeholder='20OFF'\n                                    leftIcon={'percent'}\n                                    onChangeText={value => { this.setState({ coupon: value }) }}\n                                />\n\n                                <MowButtonBasic\n                                    containerStyle={{ flex: 1, backgroundColor: mowColors.mainColor }}\n                                    size={'small'}\n                                    type={'success'}\n                                    onPress={this.activateCoupon}\n                                >\n                                    {this.state.isLoadingCoupon ? 'Applying' : 'Apply'}\n                                </MowButtonBasic>\n                            </View>\n                            <View\n                                style={{\n                                    backgroundColor: mowColors.viewBGColor,\n                                    flexDirection: 'row',\n                                    width: '100%',\n                                    borderRadius: 5,\n                                    padding: 10\n                                }}>\n\n                                <View\n                                    style={{ flex: 1 }}>\n                                    <View>\n                                        <Text\n                                            style={this.cartTotalStyle.title}>\n                                            Sub Total:\n                                </Text>\n                                        <Text>\n                                            {this.calculateSubTotal()}\n                                        </Text>\n                                    </View>\n                                    <View>\n                                        <Text\n                                            style={this.cartTotalStyle.title}>\n                                            Vat:\n                                </Text>\n                                        <Text>\n                                            {this.calculateVatTotal()}\n                                        </Text>\n                                    </View>\n\n                                    <View>\n                                        <Text\n                                            style={this.cartTotalStyle.title}>\n                                            Coupon:\n                                </Text>\n                                        <Text>\n                                            {this.calculateCouponTotal()}\n                                        </Text>\n                                    </View>\n                                </View>\n                                <View\n                                    style={{ flex: 1, alignItems: 'flex-end', justifyContent: 'center' }}>\n                                    <Text\n                                        style={{\n                                            color: mowColors.mainColor,\n                                            marginRight: 10,\n                                            fontSize: hp(2),\n                                            fontWeight: 'bold',\n                                            letterSpacing: 1\n                                        }}>\n                                        {(this.calculateSubTotal() + this.calculateVatTotal()) - this.calculateCouponTotal()}\n                                    </Text>\n                                </View>\n                            </View>\n                            <MowButtonBasic\n                                onPress={() => { this.props.navigation.navigate('BillingAddress') }}\n                                type={'success'}>\n                                Continue\n                            </MowButtonBasic>\n                        </View> : null\n                }\n            </MowContainer>\n        )\n    }\n}\n\nconst minusPlusStyle = ({\n    container: {\n        borderRadius: 3,\n        backgroundColor: '#ffffff',\n        ...borderStyle,\n        alignItems: 'center',\n        justifyContent: 'center',\n        width: hp('3%'),\n        height: hp('3%'),\n    },\n    text: {\n        fontSize: hp('2%'),\n        fontWeight: '600',\n        fontStyle: 'normal',\n        letterSpacing: 0,\n        textAlign: 'center',\n        color: '#707070',\n    }\n});\n\nconst mapStateToProps = (state) => {\n    const { user, product } = state;\n    return { user, product };\n};\nconst mapDispatchToProps = {\n    increaseInCart: increaseInCart,\n    decreaseInCart: decreaseInCart,\n    removeFromCart: removeFromCart,\n    setActivatedCoupon: setActivatedCoupon,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(CartScreen);"]},"metadata":{},"sourceType":"module"}
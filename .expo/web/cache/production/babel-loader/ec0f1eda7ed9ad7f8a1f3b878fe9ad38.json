{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";function _createSuper(Derived){return function(){var Super=_getPrototypeOf(Derived),result;if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React from'react';import FlatList from\"react-native-web/dist/exports/FlatList\";import View from\"react-native-web/dist/exports/View\";import{connect}from'react-redux';import{Loading}from\"../../components/Loading/loading\";import MowListItem from\"../../components/ui/Common/ListItem/MowListItem\";import MowContainer from\"../../components/ui/Core/Container/MowContainer\";import{CategoryController}from\"../../controller/category.controller\";import{setCategory}from\"../../store/actions/categoryActions\";import{pageContainerStyle}from\"../../values/Styles/MowStyles\";var CategoriesScreen=function(_React$Component){_inherits(CategoriesScreen,_React$Component);var _super=_createSuper(CategoriesScreen);function CategoriesScreen(props){var _this;_classCallCheck(this,CategoriesScreen);_this=_super.call(this,props);_this.categoryController=new CategoryController();_this._unsubscribe=null;_this.onSelect=function(item){_this.props.setCategory(item);_this.props.navigation.navigate('SubCategories');};_this.state={categories:null,department:null};return _this;}_createClass(CategoriesScreen,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this._unsubscribe=this.props.navigation.addListener('focus',function(){_this2.setState({categories:null});_this2.getCategories(_this2.props.category.department);});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._unsubscribe();}},{key:\"getCategories\",value:function getCategories(department){var _this3=this;this.categoryController.getAll({take:'all',isActive:1,department:department.uuid}).subscribe(function(result){var data=result.data;_this3.setState({categories:data.data});});}},{key:\"render\",value:function render(){var _this4=this;var categories=this.state.categories;return React.createElement(MowContainer,{navigation:this.props.navigation,footerActiveIndex:2,title:this.props.category.department===null?'Categories':this.props.category.department.name},categories===null?React.createElement(View,null,React.createElement(Loading,null),React.createElement(Loading,null),React.createElement(Loading,null),React.createElement(Loading,null),React.createElement(Loading,null),React.createElement(Loading,null),React.createElement(Loading,null),React.createElement(Loading,null),React.createElement(Loading,null),React.createElement(Loading,null)):React.createElement(FlatList,{showsVerticalScrollIndicator:false,keyExtractor:function keyExtractor(item,index){return index.toString();},data:categories,style:[pageContainerStyle],renderItem:function renderItem(_ref){var item=_ref.item,index=_ref.index;return React.createElement(MowListItem,{key:index,style:{marginVertical:5,borderRadius:5},onPress:function onPress(){_this4.onSelect(item);},imagePath:item.image,title:item.name});}}));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){return null;}}]);return CategoriesScreen;}(React.Component);var mapStateToProps=function mapStateToProps(state){var category=state.category;return{category:category};};var mapDispatchToProps={setCategory:setCategory};export default connect(mapStateToProps,mapDispatchToProps)(CategoriesScreen);","map":{"version":3,"sources":["/home/aunto/Projects/WCL/wcl-app/src/scenes/category/categories.component.tsx"],"names":["CategoriesScreen","React","categoryController","_unsubscribe","categories","department","props","state","take","isActive","data","result","index","item","marginVertical","borderRadius","mapStateToProps","category","mapDispatchToProps","setCategory","connect"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { FlatList, View } from 'react-native';\nimport { connect } from 'react-redux';\nimport { Loading } from '../../components/Loading/loading';\nimport MowListItem from '../../components/ui/Common/ListItem/MowListItem';\nimport MowContainer from '../../components/ui/Core/Container/MowContainer';\nimport { CategoryController } from '../../controller/category.controller';\nimport { setCategory } from '../../store/actions/categoryActions';\nimport { pageContainerStyle } from '../../values/Styles/MowStyles';\n\ninterface IProps {\n    navigation: any;\n    route: any;\n    category: any;\n    setCategory(category: any): any;\n}\n\ninterface IState {\n    categories: any;\n    department: any;\n}\n\nclass CategoriesScreen extends React.Component<IProps, IState> {\n\n    categoryController = new CategoryController();\n    _unsubscribe = null;\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            categories: null,\n            department: null,\n        }\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        return null;\n    }\n\n    componentDidMount() {\n        this._unsubscribe = this.props.navigation.addListener('focus', () => {\n            this.setState({ categories: null });\n            this.getCategories(this.props.category.department);\n        })\n    }\n\n    componentWillUnmount() {\n        this._unsubscribe();\n    }\n\n    getCategories(department) {\n        this.categoryController.getAll({ take: 'all', isActive: 1, department: department.uuid })\n            .subscribe((result: any) => {\n                const data = result.data;\n                this.setState({ categories: data.data });\n            })\n    }\n\n    onSelect = (item) => {\n        this.props.setCategory(item);\n        this.props.navigation.navigate('SubCategories');\n    }\n\n    render() {\n        const { categories } = this.state;\n        return (\n            <MowContainer\n                navigation={this.props.navigation}\n                footerActiveIndex={2}\n                title={this.props.category.department === null ? 'Categories' : this.props.category.department.name}>\n                {\n                    categories === null ?\n                        <View>\n                            <Loading />\n                            <Loading />\n                            <Loading />\n                            <Loading />\n                            <Loading />\n                            <Loading />\n                            <Loading />\n                            <Loading />\n                            <Loading />\n                            <Loading />\n                        </View> :\n                        <FlatList\n                            showsVerticalScrollIndicator={false}\n                            keyExtractor={(item, index) => index.toString()}\n                            data={categories}\n                            style={[pageContainerStyle]}\n                            renderItem={({ item, index }) => (\n                                <MowListItem\n                                    key={index}\n                                    style={{ marginVertical: 5, borderRadius: 5 }}\n                                    onPress={() => { this.onSelect(item) }}\n                                    imagePath={item.image}\n                                    title={item.name} />\n                            )}\n                        />\n                }\n            </MowContainer>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    const { category } = state;\n    return { category };\n};\nconst mapDispatchToProps = {\n    setCategory: setCategory,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(CategoriesScreen);"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";function _createSuper(Derived){return function(){var Super=_getPrototypeOf(Derived),result;if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React,{Component}from'react';import PropTypes from'prop-types';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import Modal from\"react-native-web/dist/exports/Modal\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import DatePickerAndroid from\"react-native-web/dist/exports/DatePickerAndroid\";import TimePickerAndroid from\"react-native-web/dist/exports/TimePickerAndroid\";import DatePickerIOS from\"react-native-web/dist/exports/DatePickerIOS\";import Platform from\"react-native-web/dist/exports/Platform\";import Animated from\"react-native-web/dist/exports/Animated\";import Keyboard from\"react-native-web/dist/exports/Keyboard\";import Style from\"./style\";import Moment from'moment';var FORMATS={'date':'YYYY-MM-DD','datetime':'YYYY-MM-DD HH:mm','time':'HH:mm'};var SUPPORTED_ORIENTATIONS=['portrait','portrait-upside-down','landscape','landscape-left','landscape-right'];var DatePicker=function(_Component){_inherits(DatePicker,_Component);var _super=_createSuper(DatePicker);function DatePicker(props){var _this;_classCallCheck(this,DatePicker);_this=_super.call(this,props);_this.state={date:_this.getDate(),modalVisible:false,animatedHeight:new Animated.Value(0),allowPointerEvents:true};_this.getDate=_this.getDate.bind(_assertThisInitialized(_this));_this.getDateStr=_this.getDateStr.bind(_assertThisInitialized(_this));_this.datePicked=_this.datePicked.bind(_assertThisInitialized(_this));_this.onPressDate=_this.onPressDate.bind(_assertThisInitialized(_this));_this.onPressCancel=_this.onPressCancel.bind(_assertThisInitialized(_this));_this.onPressConfirm=_this.onPressConfirm.bind(_assertThisInitialized(_this));_this.onDateChange=_this.onDateChange.bind(_assertThisInitialized(_this));_this.onPressMask=_this.onPressMask.bind(_assertThisInitialized(_this));_this.onDatePicked=_this.onDatePicked.bind(_assertThisInitialized(_this));_this.onTimePicked=_this.onTimePicked.bind(_assertThisInitialized(_this));_this.onDatetimePicked=_this.onDatetimePicked.bind(_assertThisInitialized(_this));_this.onDatetimeTimePicked=_this.onDatetimeTimePicked.bind(_assertThisInitialized(_this));_this.setModalVisible=_this.setModalVisible.bind(_assertThisInitialized(_this));return _this;}_createClass(DatePicker,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(nextProps.date!==this.props.date){this.setState({date:this.getDate(nextProps.date)});}}},{key:\"setModalVisible\",value:function setModalVisible(visible){var _this2=this;var _this$props=this.props,height=_this$props.height,duration=_this$props.duration;if(visible){this.setState({modalVisible:visible});return Animated.timing(this.state.animatedHeight,{toValue:height,duration:duration}).start();}else{return Animated.timing(this.state.animatedHeight,{toValue:0,duration:duration}).start(function(){_this2.setState({modalVisible:visible});});}}},{key:\"onStartShouldSetResponder\",value:function onStartShouldSetResponder(e){return true;}},{key:\"onMoveShouldSetResponder\",value:function onMoveShouldSetResponder(e){return true;}},{key:\"onPressMask\",value:function onPressMask(){if(typeof this.props.onPressMask==='function'){this.props.onPressMask();}else{this.onPressCancel();}}},{key:\"onPressCancel\",value:function onPressCancel(){this.setModalVisible(false);if(typeof this.props.onCloseModal==='function'){this.props.onCloseModal();}}},{key:\"onPressConfirm\",value:function onPressConfirm(){this.datePicked();this.setModalVisible(false);if(typeof this.props.onCloseModal==='function'){this.props.onCloseModal();}}},{key:\"getDate\",value:function getDate(){var date=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props.date;var _this$props2=this.props,mode=_this$props2.mode,minDate=_this$props2.minDate,maxDate=_this$props2.maxDate,_this$props2$format=_this$props2.format,format=_this$props2$format===void 0?FORMATS[mode]:_this$props2$format;if(!date){var now=new Date();if(minDate){var _minDate=this.getDate(minDate);if(now<_minDate){return _minDate;}}if(maxDate){var _maxDate=this.getDate(maxDate);if(now>_maxDate){return _maxDate;}}return now;}if(date instanceof Date){return date;}return Moment(date,format).toDate();}},{key:\"getDateStr\",value:function getDateStr(){var date=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props.date;var _this$props3=this.props,mode=_this$props3.mode,_this$props3$format=_this$props3.format,format=_this$props3$format===void 0?FORMATS[mode]:_this$props3$format;var dateInstance=date instanceof Date?date:this.getDate(date);if(typeof this.props.getDateStr==='function'){return this.props.getDateStr(dateInstance);}return Moment(dateInstance).format(format);}},{key:\"datePicked\",value:function datePicked(){if(typeof this.props.onDateChange==='function'){this.props.onDateChange(this.getDateStr(this.state.date),this.state.date);}}},{key:\"getTitleElement\",value:function getTitleElement(){var _this$props4=this.props,date=_this$props4.date,placeholder=_this$props4.placeholder,customStyles=_this$props4.customStyles,allowFontScaling=_this$props4.allowFontScaling;if(!date&&placeholder){return React.createElement(Text,{allowFontScaling:allowFontScaling,style:[Style.placeholderText,customStyles.placeholderText]},placeholder);}return React.createElement(Text,{allowFontScaling:allowFontScaling,style:[Style.dateText,customStyles.dateText]},this.getDateStr());}},{key:\"onDateChange\",value:function onDateChange(date){var _this3=this;this.setState({allowPointerEvents:false,date:date});var timeoutId=setTimeout(function(){_this3.setState({allowPointerEvents:true});clearTimeout(timeoutId);},200);}},{key:\"onDatePicked\",value:function onDatePicked(_ref){var action=_ref.action,year=_ref.year,month=_ref.month,day=_ref.day;if(action!==DatePickerAndroid.dismissedAction){this.setState({date:new Date(year,month,day)});this.datePicked();}else{this.onPressCancel();}}},{key:\"onTimePicked\",value:function onTimePicked(_ref2){var action=_ref2.action,hour=_ref2.hour,minute=_ref2.minute;if(action!==DatePickerAndroid.dismissedAction){this.setState({date:Moment().hour(hour).minute(minute).toDate()});this.datePicked();}else{this.onPressCancel();}}},{key:\"onDatetimePicked\",value:function onDatetimePicked(_ref3){var action=_ref3.action,year=_ref3.year,month=_ref3.month,day=_ref3.day;var _this$props5=this.props,mode=_this$props5.mode,androidMode=_this$props5.androidMode,_this$props5$format=_this$props5.format,format=_this$props5$format===void 0?FORMATS[mode]:_this$props5$format,_this$props5$is24Hour=_this$props5.is24Hour,is24Hour=_this$props5$is24Hour===void 0?!format.match(/h|a/):_this$props5$is24Hour;if(action!==DatePickerAndroid.dismissedAction){var timeMoment=Moment(this.state.date);TimePickerAndroid.open({hour:timeMoment.hour(),minute:timeMoment.minutes(),is24Hour:is24Hour,mode:androidMode}).then(this.onDatetimeTimePicked.bind(this,year,month,day));}else{this.onPressCancel();}}},{key:\"onDatetimeTimePicked\",value:function onDatetimeTimePicked(year,month,day,_ref4){var action=_ref4.action,hour=_ref4.hour,minute=_ref4.minute;if(action!==DatePickerAndroid.dismissedAction){this.setState({date:new Date(year,month,day,hour,minute)});this.datePicked();}else{this.onPressCancel();}}},{key:\"onPressDate\",value:function onPressDate(){if(this.props.disabled){return true;}Keyboard.dismiss();this.setState({date:this.getDate()});if(Platform.OS==='ios'){this.setModalVisible(true);}else{var _this$props6=this.props,mode=_this$props6.mode,androidMode=_this$props6.androidMode,_this$props6$format=_this$props6.format,format=_this$props6$format===void 0?FORMATS[mode]:_this$props6$format,minDate=_this$props6.minDate,maxDate=_this$props6.maxDate,_this$props6$is24Hour=_this$props6.is24Hour,is24Hour=_this$props6$is24Hour===void 0?!format.match(/h|a/):_this$props6$is24Hour;if(mode==='date'){DatePickerAndroid.open({date:this.state.date,minDate:minDate&&this.getDate(minDate),maxDate:maxDate&&this.getDate(maxDate),mode:androidMode}).then(this.onDatePicked);}else if(mode==='time'){var timeMoment=Moment(this.state.date);TimePickerAndroid.open({hour:timeMoment.hour(),minute:timeMoment.minutes(),is24Hour:is24Hour,mode:androidMode}).then(this.onTimePicked);}else if(mode==='datetime'){DatePickerAndroid.open({date:this.state.date,minDate:minDate&&this.getDate(minDate),maxDate:maxDate&&this.getDate(maxDate),mode:androidMode}).then(this.onDatetimePicked);}}if(typeof this.props.onOpenModal==='function'){this.props.onOpenModal();}}},{key:\"_renderIcon\",value:function _renderIcon(){var _this$props7=this.props,showIcon=_this$props7.showIcon,iconSource=_this$props7.iconSource,iconComponent=_this$props7.iconComponent,customStyles=_this$props7.customStyles;if(showIcon){if(iconComponent){return iconComponent;}return React.createElement(Image,{style:[Style.dateIcon,customStyles.dateIcon],source:iconSource});}return null;}},{key:\"render\",value:function render(){var _this4=this;var _this$props8=this.props,mode=_this$props8.mode,style=_this$props8.style,customStyles=_this$props8.customStyles,disabled=_this$props8.disabled,minDate=_this$props8.minDate,maxDate=_this$props8.maxDate,minuteInterval=_this$props8.minuteInterval,timeZoneOffsetInMinutes=_this$props8.timeZoneOffsetInMinutes,cancelBtnText=_this$props8.cancelBtnText,confirmBtnText=_this$props8.confirmBtnText,TouchableComponent=_this$props8.TouchableComponent,testID=_this$props8.testID,cancelBtnTestID=_this$props8.cancelBtnTestID,confirmBtnTestID=_this$props8.confirmBtnTestID,allowFontScaling=_this$props8.allowFontScaling,locale=_this$props8.locale;var dateInputStyle=[Style.dateInput,customStyles.dateInput,disabled&&Style.disabled,disabled&&customStyles.disabled];return React.createElement(TouchableComponent,{style:[Style.dateTouch,style],underlayColor:'transparent',onPress:this.onPressDate,testID:testID},React.createElement(View,{style:[Style.dateTouchBody,customStyles.dateTouchBody]},!this.props.hideText?React.createElement(View,{style:dateInputStyle},this.getTitleElement()):React.createElement(View,null),this._renderIcon(),Platform.OS==='ios'&&React.createElement(Modal,{transparent:true,animationType:\"none\",visible:this.state.modalVisible,supportedOrientations:SUPPORTED_ORIENTATIONS,onRequestClose:function onRequestClose(){_this4.setModalVisible(false);}},React.createElement(View,{style:{flex:1}},React.createElement(TouchableComponent,{style:Style.datePickerMask,activeOpacity:1,underlayColor:'#00000077',onPress:this.onPressMask},React.createElement(TouchableComponent,{underlayColor:'#fff',style:{flex:1}},React.createElement(Animated.View,{style:[Style.datePickerCon,{height:this.state.animatedHeight},customStyles.datePickerCon]},React.createElement(View,{pointerEvents:this.state.allowPointerEvents?'auto':'none'},React.createElement(DatePickerIOS,{date:this.state.date,mode:mode,minimumDate:minDate&&this.getDate(minDate),maximumDate:maxDate&&this.getDate(maxDate),onDateChange:this.onDateChange,minuteInterval:minuteInterval,timeZoneOffsetInMinutes:timeZoneOffsetInMinutes?timeZoneOffsetInMinutes:null,style:[Style.datePicker,customStyles.datePicker],locale:locale})),React.createElement(TouchableComponent,{underlayColor:'transparent',onPress:this.onPressCancel,style:[Style.btnText,Style.btnCancel,customStyles.btnCancel],testID:cancelBtnTestID},React.createElement(Text,{allowFontScaling:allowFontScaling,style:[Style.btnTextText,Style.btnTextCancel,customStyles.btnTextCancel]},cancelBtnText)),React.createElement(TouchableComponent,{underlayColor:'transparent',onPress:this.onPressConfirm,style:[Style.btnText,Style.btnConfirm,customStyles.btnConfirm],testID:confirmBtnTestID},React.createElement(Text,{allowFontScaling:allowFontScaling,style:[Style.btnTextText,customStyles.btnTextConfirm]},confirmBtnText)))))))));}}]);return DatePicker;}(Component);DatePicker.defaultProps={mode:'date',androidMode:'default',date:'',height:259,duration:300,confirmBtnText:'确定',cancelBtnText:'取消',iconSource:require(\"./date_icon.png\"),customStyles:{},showIcon:true,disabled:false,allowFontScaling:true,hideText:false,placeholder:'',TouchableComponent:TouchableHighlight,modalOnResponderTerminationRequest:function modalOnResponderTerminationRequest(e){return true;}};DatePicker.propTypes={mode:PropTypes.oneOf(['date','datetime','time']),androidMode:PropTypes.oneOf(['clock','calendar','spinner','default']),date:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(Date),PropTypes.object]),format:PropTypes.string,minDate:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(Date)]),maxDate:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(Date)]),height:PropTypes.number,duration:PropTypes.number,confirmBtnText:PropTypes.string,cancelBtnText:PropTypes.string,iconSource:PropTypes.oneOfType([PropTypes.number,PropTypes.object]),iconComponent:PropTypes.element,customStyles:PropTypes.object,showIcon:PropTypes.bool,disabled:PropTypes.bool,allowFontScaling:PropTypes.bool,onDateChange:PropTypes.func,onOpenModal:PropTypes.func,onCloseModal:PropTypes.func,onPressMask:PropTypes.func,placeholder:PropTypes.string,modalOnResponderTerminationRequest:PropTypes.func,is24Hour:PropTypes.bool,getDateStr:PropTypes.func,locale:PropTypes.string};export default DatePicker;","map":{"version":3,"sources":["/home/aunto/Projects/WCL/wcl-app/node_modules/react-native-datepicker/datepicker.js"],"names":["React","Component","PropTypes","Style","Moment","FORMATS","SUPPORTED_ORIENTATIONS","DatePicker","props","state","date","getDate","modalVisible","animatedHeight","Animated","Value","allowPointerEvents","bind","getDateStr","datePicked","onPressDate","onPressCancel","onPressConfirm","onDateChange","onPressMask","onDatePicked","onTimePicked","onDatetimePicked","onDatetimeTimePicked","setModalVisible","nextProps","setState","visible","height","duration","timing","toValue","start","e","onCloseModal","mode","minDate","maxDate","format","now","Date","_minDate","_maxDate","toDate","dateInstance","placeholder","customStyles","allowFontScaling","placeholderText","dateText","timeoutId","setTimeout","clearTimeout","action","year","month","day","DatePickerAndroid","dismissedAction","hour","minute","androidMode","is24Hour","match","timeMoment","TimePickerAndroid","open","minutes","then","disabled","Keyboard","dismiss","Platform","OS","onOpenModal","showIcon","iconSource","iconComponent","dateIcon","style","minuteInterval","timeZoneOffsetInMinutes","cancelBtnText","confirmBtnText","TouchableComponent","testID","cancelBtnTestID","confirmBtnTestID","locale","dateInputStyle","dateInput","dateTouch","dateTouchBody","hideText","getTitleElement","_renderIcon","flex","datePickerMask","datePickerCon","datePicker","btnText","btnCancel","btnTextText","btnTextCancel","btnConfirm","btnTextConfirm","defaultProps","require","TouchableHighlight","modalOnResponderTerminationRequest","propTypes","oneOf","oneOfType","string","instanceOf","object","number","element","bool","func"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  View,\n  Text,\n  Image,\n  Modal,\n  TouchableHighlight,\n  DatePickerAndroid,\n  TimePickerAndroid,\n  DatePickerIOS,\n  Platform,\n  Animated,\n  Keyboard\n} from 'react-native';\nimport Style from './style';\nimport Moment from 'moment';\n\nconst FORMATS = {\n  'date': 'YYYY-MM-DD',\n  'datetime': 'YYYY-MM-DD HH:mm',\n  'time': 'HH:mm'\n};\n\nconst SUPPORTED_ORIENTATIONS = ['portrait', 'portrait-upside-down', 'landscape', 'landscape-left', 'landscape-right'];\n\nclass DatePicker extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      date: this.getDate(),\n      modalVisible: false,\n      animatedHeight: new Animated.Value(0),\n      allowPointerEvents: true\n    };\n\n    this.getDate = this.getDate.bind(this);\n    this.getDateStr = this.getDateStr.bind(this);\n    this.datePicked = this.datePicked.bind(this);\n    this.onPressDate = this.onPressDate.bind(this);\n    this.onPressCancel = this.onPressCancel.bind(this);\n    this.onPressConfirm = this.onPressConfirm.bind(this);\n    this.onDateChange = this.onDateChange.bind(this);\n    this.onPressMask = this.onPressMask.bind(this);\n    this.onDatePicked = this.onDatePicked.bind(this);\n    this.onTimePicked = this.onTimePicked.bind(this);\n    this.onDatetimePicked = this.onDatetimePicked.bind(this);\n    this.onDatetimeTimePicked = this.onDatetimeTimePicked.bind(this);\n    this.setModalVisible = this.setModalVisible.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.date !== this.props.date) {\n      this.setState({date: this.getDate(nextProps.date)});\n    }\n  }\n\n  setModalVisible(visible) {\n    const {height, duration} = this.props;\n\n    // slide animation\n    if (visible) {\n      this.setState({modalVisible: visible});\n      return Animated.timing(\n        this.state.animatedHeight,\n        {\n          toValue: height,\n          duration: duration\n        }\n      ).start();\n    } else {\n      return Animated.timing(\n        this.state.animatedHeight,\n        {\n          toValue: 0,\n          duration: duration\n        }\n      ).start(() => {\n        this.setState({modalVisible: visible});\n      });\n    }\n  }\n\n  onStartShouldSetResponder(e) {\n    return true;\n  }\n\n  onMoveShouldSetResponder(e) {\n    return true;\n  }\n\n  onPressMask() {\n    if (typeof this.props.onPressMask === 'function') {\n      this.props.onPressMask();\n    } else {\n      this.onPressCancel();\n    }\n  }\n\n  onPressCancel() {\n    this.setModalVisible(false);\n\n    if (typeof this.props.onCloseModal === 'function') {\n      this.props.onCloseModal();\n    }\n  }\n\n  onPressConfirm() {\n    this.datePicked();\n    this.setModalVisible(false);\n\n    if (typeof this.props.onCloseModal === 'function') {\n      this.props.onCloseModal();\n    }\n  }\n\n  getDate(date = this.props.date) {\n    const {mode, minDate, maxDate, format = FORMATS[mode]} = this.props;\n\n    // date默认值\n    if (!date) {\n      let now = new Date();\n      if (minDate) {\n        let _minDate = this.getDate(minDate);\n\n        if (now < _minDate) {\n          return _minDate;\n        }\n      }\n\n      if (maxDate) {\n        let _maxDate = this.getDate(maxDate);\n\n        if (now > _maxDate) {\n          return _maxDate;\n        }\n      }\n\n      return now;\n    }\n\n    if (date instanceof Date) {\n      return date;\n    }\n\n    return Moment(date, format).toDate();\n  }\n\n  getDateStr(date = this.props.date) {\n    const {mode, format = FORMATS[mode]} = this.props;\n\n    const dateInstance = date instanceof Date\n      ? date\n      : this.getDate(date);\n\n    if (typeof this.props.getDateStr === 'function') {\n      return this.props.getDateStr(dateInstance);\n    }\n\n    return Moment(dateInstance).format(format);\n  }\n\n  datePicked() {\n    if (typeof this.props.onDateChange === 'function') {\n      this.props.onDateChange(this.getDateStr(this.state.date), this.state.date);\n    }\n  }\n\n  getTitleElement() {\n    const {date, placeholder, customStyles, allowFontScaling} = this.props;\n\n    if (!date && placeholder) {\n      return (\n        <Text allowFontScaling={allowFontScaling} style={[Style.placeholderText, customStyles.placeholderText]}>\n          {placeholder}\n        </Text>\n      );\n    }\n    return (\n      <Text allowFontScaling={allowFontScaling} style={[Style.dateText, customStyles.dateText]}>\n        {this.getDateStr()}\n      </Text>\n    );\n  }\n\n  onDateChange(date) {\n    this.setState({\n      allowPointerEvents: false,\n      date: date\n    });\n    const timeoutId = setTimeout(() => {\n      this.setState({\n        allowPointerEvents: true\n      });\n      clearTimeout(timeoutId);\n    }, 200);\n  }\n\n  onDatePicked({action, year, month, day}) {\n    if (action !== DatePickerAndroid.dismissedAction) {\n      this.setState({\n        date: new Date(year, month, day)\n      });\n      this.datePicked();\n    } else {\n      this.onPressCancel();\n    }\n  }\n\n  onTimePicked({action, hour, minute}) {\n    if (action !== DatePickerAndroid.dismissedAction) {\n      this.setState({\n        date: Moment().hour(hour).minute(minute).toDate()\n      });\n      this.datePicked();\n    } else {\n      this.onPressCancel();\n    }\n  }\n\n  onDatetimePicked({action, year, month, day}) {\n    const {mode, androidMode, format = FORMATS[mode], is24Hour = !format.match(/h|a/)} = this.props;\n\n    if (action !== DatePickerAndroid.dismissedAction) {\n      let timeMoment = Moment(this.state.date);\n\n      TimePickerAndroid.open({\n        hour: timeMoment.hour(),\n        minute: timeMoment.minutes(),\n        is24Hour: is24Hour,\n        mode: androidMode\n      }).then(this.onDatetimeTimePicked.bind(this, year, month, day));\n    } else {\n      this.onPressCancel();\n    }\n  }\n\n  onDatetimeTimePicked(year, month, day, {action, hour, minute}) {\n    if (action !== DatePickerAndroid.dismissedAction) {\n      this.setState({\n        date: new Date(year, month, day, hour, minute)\n      });\n      this.datePicked();\n    } else {\n      this.onPressCancel();\n    }\n  }\n\n  onPressDate() {\n    if (this.props.disabled) {\n      return true;\n    }\n\n    Keyboard.dismiss();\n\n    // reset state\n    this.setState({\n      date: this.getDate()\n    });\n\n    if (Platform.OS === 'ios') {\n      this.setModalVisible(true);\n    } else {\n\n      const {mode, androidMode, format = FORMATS[mode], minDate, maxDate, is24Hour = !format.match(/h|a/)} = this.props;\n\n      // 选日期\n      if (mode === 'date') {\n        DatePickerAndroid.open({\n          date: this.state.date,\n          minDate: minDate && this.getDate(minDate),\n          maxDate: maxDate && this.getDate(maxDate),\n          mode: androidMode\n        }).then(this.onDatePicked);\n      } else if (mode === 'time') {\n        // 选时间\n\n        let timeMoment = Moment(this.state.date);\n\n        TimePickerAndroid.open({\n          hour: timeMoment.hour(),\n          minute: timeMoment.minutes(),\n          is24Hour: is24Hour,\n          mode: androidMode\n        }).then(this.onTimePicked);\n      } else if (mode === 'datetime') {\n        // 选日期和时间\n\n        DatePickerAndroid.open({\n          date: this.state.date,\n          minDate: minDate && this.getDate(minDate),\n          maxDate: maxDate && this.getDate(maxDate),\n          mode: androidMode\n        }).then(this.onDatetimePicked);\n      }\n    }\n\n    if (typeof this.props.onOpenModal === 'function') {\n      this.props.onOpenModal();\n    }\n  }\n\n  _renderIcon() {\n    const {\n      showIcon,\n      iconSource,\n      iconComponent,\n      customStyles\n    } = this.props;\n\n    if (showIcon) {\n      if (iconComponent) {\n        return iconComponent;\n      }\n      return (\n        <Image\n          style={[Style.dateIcon, customStyles.dateIcon]}\n          source={iconSource}\n        />\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    const {\n      mode,\n      style,\n      customStyles,\n      disabled,\n      minDate,\n      maxDate,\n      minuteInterval,\n      timeZoneOffsetInMinutes,\n      cancelBtnText,\n      confirmBtnText,\n      TouchableComponent,\n      testID,\n      cancelBtnTestID,\n      confirmBtnTestID,\n      allowFontScaling,\n      locale\n    } = this.props;\n\n    const dateInputStyle = [\n      Style.dateInput, customStyles.dateInput,\n      disabled && Style.disabled,\n      disabled && customStyles.disabled\n    ];\n\n    return (\n      <TouchableComponent\n        style={[Style.dateTouch, style]}\n        underlayColor={'transparent'}\n        onPress={this.onPressDate}\n        testID={testID}\n      >\n        <View style={[Style.dateTouchBody, customStyles.dateTouchBody]}>\n          {\n            !this.props.hideText ?\n              <View style={dateInputStyle}>\n                {this.getTitleElement()}\n              </View>\n            :\n              <View/>\n          }\n          {this._renderIcon()}\n          {Platform.OS === 'ios' && <Modal\n            transparent={true}\n            animationType=\"none\"\n            visible={this.state.modalVisible}\n            supportedOrientations={SUPPORTED_ORIENTATIONS}\n            onRequestClose={() => {this.setModalVisible(false);}}\n          >\n            <View\n              style={{flex: 1}}\n            >\n              <TouchableComponent\n                style={Style.datePickerMask}\n                activeOpacity={1}\n                underlayColor={'#00000077'}\n                onPress={this.onPressMask}\n              >\n                <TouchableComponent\n                  underlayColor={'#fff'}\n                  style={{flex: 1}}\n                >\n                  <Animated.View\n                    style={[Style.datePickerCon, {height: this.state.animatedHeight}, customStyles.datePickerCon]}\n                  >\n                    <View pointerEvents={this.state.allowPointerEvents ? 'auto' : 'none'}>\n                      <DatePickerIOS\n                        date={this.state.date}\n                        mode={mode}\n                        minimumDate={minDate && this.getDate(minDate)}\n                        maximumDate={maxDate && this.getDate(maxDate)}\n                        onDateChange={this.onDateChange}\n                        minuteInterval={minuteInterval}\n                        timeZoneOffsetInMinutes={timeZoneOffsetInMinutes ? timeZoneOffsetInMinutes : null}\n                        style={[Style.datePicker, customStyles.datePicker]}\n                        locale={locale}\n                      />\n                    </View>\n                    <TouchableComponent\n                      underlayColor={'transparent'}\n                      onPress={this.onPressCancel}\n                      style={[Style.btnText, Style.btnCancel, customStyles.btnCancel]}\n                      testID={cancelBtnTestID}\n                    >\n                      <Text\n                        allowFontScaling={allowFontScaling}\n                        style={[Style.btnTextText, Style.btnTextCancel, customStyles.btnTextCancel]}\n                      >\n                        {cancelBtnText}\n                      </Text>\n                    </TouchableComponent>\n                    <TouchableComponent\n                      underlayColor={'transparent'}\n                      onPress={this.onPressConfirm}\n                      style={[Style.btnText, Style.btnConfirm, customStyles.btnConfirm]}\n                      testID={confirmBtnTestID}\n                    >\n                      <Text allowFontScaling={allowFontScaling}\n                            style={[Style.btnTextText, customStyles.btnTextConfirm]}\n                      >\n                        {confirmBtnText}\n                      </Text>\n                    </TouchableComponent>\n                  </Animated.View>\n                </TouchableComponent>\n              </TouchableComponent>\n            </View>\n          </Modal>}\n        </View>\n      </TouchableComponent>\n    );\n  }\n}\n\nDatePicker.defaultProps = {\n  mode: 'date',\n  androidMode: 'default',\n  date: '',\n  // component height: 216(DatePickerIOS) + 1(borderTop) + 42(marginTop), IOS only\n  height: 259,\n\n  // slide animation duration time, default to 300ms, IOS only\n  duration: 300,\n  confirmBtnText: '确定',\n  cancelBtnText: '取消',\n  iconSource: require('./date_icon.png'),\n  customStyles: {},\n\n  // whether or not show the icon\n  showIcon: true,\n  disabled: false,\n  allowFontScaling: true,\n  hideText: false,\n  placeholder: '',\n  TouchableComponent: TouchableHighlight,\n  modalOnResponderTerminationRequest: e => true\n};\n\nDatePicker.propTypes = {\n  mode: PropTypes.oneOf(['date', 'datetime', 'time']),\n  androidMode: PropTypes.oneOf(['clock', 'calendar', 'spinner', 'default']),\n  date: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date), PropTypes.object]),\n  format: PropTypes.string,\n  minDate: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date)]),\n  maxDate: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date)]),\n  height: PropTypes.number,\n  duration: PropTypes.number,\n  confirmBtnText: PropTypes.string,\n  cancelBtnText: PropTypes.string,\n  iconSource: PropTypes.oneOfType([PropTypes.number, PropTypes.object]),\n  iconComponent: PropTypes.element,\n  customStyles: PropTypes.object,\n  showIcon: PropTypes.bool,\n  disabled: PropTypes.bool,\n  allowFontScaling: PropTypes.bool,\n  onDateChange: PropTypes.func,\n  onOpenModal: PropTypes.func,\n  onCloseModal: PropTypes.func,\n  onPressMask: PropTypes.func,\n  placeholder: PropTypes.string,\n  modalOnResponderTerminationRequest: PropTypes.func,\n  is24Hour: PropTypes.bool,\n  getDateStr: PropTypes.func,\n  locale: PropTypes.string\n};\n\nexport default DatePicker;\n"]},"metadata":{},"sourceType":"module"}